"use strict";function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}!function(n){var t={};function a(r){if(t[r])return t[r].exports;var e=t[r]={i:r,l:!1,exports:{}};return n[r].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=n,a.c=t,a.d=function(r,e,n){a.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:n})},a.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},a.t=function(e,r){if(1&r&&(e=a(e)),8&r)return e;if(4&r&&"object"===_typeof(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)a.d(n,t,function(r){return e[r]}.bind(null,t));return n},a.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return a.d(e,"a",e),e},a.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},a.p="",a(a.s="./src/js/app.js")}({"./src/js/app.js":function srcJsAppJs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./src/js/utils.js");\n/* harmony import */ var _modules__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules */ "./src/js/modules.js");\n\r\n\r\n\r\nclass App {\r\n  constructor(modules) {\r\n    this.module = {};\r\n\r\n    this.initModules(modules);\r\n  }\r\n\r\n  initModules(modules) {\r\n    let moduleElements = document.querySelectorAll(\'[data-module]\') || [];\r\n\r\n    if (!moduleElements.length) {\r\n      console.warn(\r\n        \'MISSING MODULES: No modules were defined on the page, please check your HTML\'\r\n      );\r\n      return this;\r\n    }\r\n\r\n    moduleElements.forEach((element) => {\r\n      const elementModule = element.getAttribute(\'data-module\');\r\n\r\n      modules.forEach((module) => {\r\n        if (module.name === elementModule) {\r\n          this.module[`${module.name}-${Object(_utils__WEBPACK_IMPORTED_MODULE_0__["generateGuid"])()}`] =\r\n            new module.constructor(this, element);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  emitEvent({ name, payload }) {\r\n    const event = new CustomEvent(name, {\r\n      detail: payload,\r\n      bubbles: true,\r\n      cancelable: true,\r\n    });\r\n\r\n    document.dispatchEvent(event);\r\n  }\r\n}\r\n\r\nconst app = new App(_modules__WEBPACK_IMPORTED_MODULE_1__["modules"]);\r\n/* harmony default export */ __webpack_exports__["default"] = (app);\r\n\r\n// for debugging\r\nwindow.APP = app || {};\r\n\r\n// const addButton = document.querySelector(\'#add\');\r\n\r\n// addButton.addEventListener(\'click\', () => {\r\n//   console.log(\'Adding to cart\');\r\n\r\n//   const data = {\r\n//     payment_method: "bacs",\r\n//     payment_method_title: "Direct Bank Transfer",\r\n//     set_paid: true,\r\n//     billing: {\r\n//       first_name: "John",\r\n//       last_name: "Doe",\r\n//       address_1: "969 Market",\r\n//       address_2: "",\r\n//       city: "San Francisco",\r\n//       state: "CA",\r\n//       postcode: "94103",\r\n//       country: "US",\r\n//       email: "john.doe@example.com",\r\n//       phone: "(555) 555-5555"\r\n//     },\r\n//     shipping: {\r\n//       first_name: "John",\r\n//       last_name: "Doe",\r\n//       address_1: "969 Market",\r\n//       address_2: "",\r\n//       city: "San Francisco",\r\n//       state: "CA",\r\n//       postcode: "94103",\r\n//       country: "US"\r\n//     },\r\n//     line_items: [\r\n//       {\r\n//         product_id: 93,\r\n//         quantity: 2\r\n//       },\r\n//       {\r\n//         product_id: 22,\r\n//         variation_id: 23,\r\n//         quantity: 1\r\n//       }\r\n//     ],\r\n//     shipping_lines: [\r\n//       {\r\n//         method_id: "flat_rate",\r\n//         method_title: "Flat Rate",\r\n//         total: "10.00"\r\n//       }\r\n//     ]\r\n//   };\r\n\r\n\r\n//   fetch(\'https://opaklopa.local/wp-json/wc/v3/orders\', {\r\n//     method: \'GET\',\r\n//     headers: {\r\n//       \'Content-Type\': \'application/json\',\r\n//       Authorization: `Basic ${Buffer.from(\'ck_47fc00cf4013b0019059255c037ec51d6f916797:cs_95133a72259ada71c449a10bb254eab7bb30ce38\').toString(\'base64\')}`,\r\n//     },\r\n//     // body: JSON.stringify(data),\r\n//   })\r\n//     .then((response) => response.json())\r\n//     .then((data) => console.log(data));\r\n// });\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/js/app.js?')},"./src/js/modules.js":function srcJsModulesJs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modules", function() { return modules; });\n/* harmony import */ var _modules_cart_add_to_cart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/cart/add-to-cart */ "./src/js/modules/cart/add-to-cart.js");\n/* harmony import */ var _modules_cart_cart_sidebar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/cart/cart-sidebar */ "./src/js/modules/cart/cart-sidebar.js");\n/* harmony import */ var _modules_hamburger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/hamburger */ "./src/js/modules/hamburger.js");\n/* harmony import */ var _modules_header__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modules/header */ "./src/js/modules/header.js");\n/* harmony import */ var _modules_navigator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./modules/navigator */ "./src/js/modules/navigator.js");\n\r\n\r\n\r\n\r\n\r\n\r\n// name of a module must be present in the DOM in order for it to be initialized\r\nconst modules = [\r\n  {\r\n    name: \'HAMBURGER\',\r\n    constructor: _modules_hamburger__WEBPACK_IMPORTED_MODULE_2__["default"]\r\n  },\r\n  {\r\n    name: \'HEADER\',\r\n    constructor: _modules_header__WEBPACK_IMPORTED_MODULE_3__["default"]\r\n  },\r\n  {\r\n    name: \'NAVIGATOR\',\r\n    constructor: _modules_navigator__WEBPACK_IMPORTED_MODULE_4__["default"]\r\n  },\r\n  {\r\n    name: \'ADD_TO_CART\',\r\n    constructor: _modules_cart_add_to_cart__WEBPACK_IMPORTED_MODULE_0__["default"]\r\n  },\r\n  {\r\n    name: \'CART_SIDEBAR\',\r\n    constructor: _modules_cart_cart_sidebar__WEBPACK_IMPORTED_MODULE_1__["default"]\r\n  },\r\n];\r\n\n\n//# sourceURL=webpack:///./src/js/modules.js?')},"./src/js/modules/cart/add-to-cart.js":function srcJsModulesCartAddToCartJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AddToCart; });\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! . */ \"./src/js/modules/cart/index.js\");\n\r\n\r\nclass AddToCart extends ___WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    constructor(app, el) {\r\n        super()\r\n        this.app = app;\r\n        this.el = el;\r\n        this.id = +this.el.dataset.id;\r\n        this.name = this.el.dataset.name;\r\n        this.price = +this.el.dataset.price;\r\n\r\n        this.handleClick = this.handleClick.bind(this);\r\n        \r\n        el.addEventListener('click', this.handleClick);\r\n    }\r\n\r\n    handleClick(e) {\r\n        this.updateCart(\r\n            this.id, \r\n            e.target.className === 'remove-product' ? 'decrease' : 'increase',\r\n            this.name,\r\n            this.price    \r\n        )\r\n\r\n        this.updateMarkup();\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/js/modules/cart/add-to-cart.js?")},"./src/js/modules/cart/cart-sidebar.js":function srcJsModulesCartCartSidebarJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CartSidebar; });\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! . */ \"./src/js/modules/cart/index.js\");\n\r\n\r\nclass CartSidebar extends ___WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    constructor(app, el) {\r\n        super()\r\n        this.app = app;\r\n        this.el = el;\r\n        this.id = +this.el.dataset.id;\r\n\r\n        this.handleClick = this.handleClick.bind(this);\r\n        \r\n        this.updateMarkup();\r\n\r\n        window.addEventListener('cart-updated', () => console.log('Got inside sidebar'));\r\n        el.addEventListener('click', this.handleClick);\r\n    }\r\n\r\n    handleClick() {\r\n        this.updateMarkup()\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/js/modules/cart/cart-sidebar.js?")},"./src/js/modules/cart/index.js":function srcJsModulesCartIndexJs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Cart; });\nclass Cart {\r\n    constructor() {}\r\n\r\n    getCart() {\r\n        return JSON.parse(localStorage.getItem(\'opa-cart\'));\r\n    }\r\n\r\n    createCart(id, productName, price) {\r\n        localStorage.setItem(\'opa-cart\', JSON.stringify([{id, quantity: 1, productName, price}]));\r\n\r\n        return this.getCart();\r\n    }\r\n\r\n    removeItemFromCart(id) {\r\n        const cart = this.getCart();\r\n\r\n        if(!cart) return false;\r\n\r\n        return cart.filter(item => {\r\n            document.querySelector(`[data-id="${item.id}"] .product__cart-data`).innerHTML = `<button class="add-to-cart">Add to cart</button>`;\r\n            if(item.id !== id) {\r\n                return item;\r\n            }\r\n        });\r\n    }\r\n\r\n    getProductIndex(id) {\r\n        const cart = this.getCart();\r\n        let cartIndex = -1;\r\n\r\n        cart.forEach((item, i) => {\r\n            if(item.id === id) {\r\n                cartIndex = i;\r\n            }\r\n        })\r\n\r\n        return cartIndex;\r\n    }\r\n\r\n    getProduct(id) {\r\n        const cart = this.getCart();\r\n\r\n        if(!cart) return false;\r\n\r\n        return cart.filter(item => {\r\n            if(item.id === id) {\r\n                return item;\r\n            }\r\n        })[0];\r\n    }\r\n\r\n    \r\n    updateCart(id, action, productName, price) {\r\n        let cart = this.getCart();\r\n\r\n        // Ako nema nista u localStorage-u\r\n        if(!cart) {\r\n            // Kreiraj cart sa osnovnim podacima\r\n\r\n            cart = this.createCart(id, productName, price);\r\n        } else {\r\n            // Ako ima azuriraj Cart\r\n            \r\n            // Proveri da li ovaj proizvod postoji u kartu\r\n            let cartIndex = this.getProductIndex(id);\r\n\r\n            // Ako postoji promeni kolicinu\r\n            if(cartIndex > -1) {\r\n                switch (action) {\r\n                    case \'increase\':\r\n                        cart[cartIndex].quantity++\r\n                        break;\r\n                    case \'decrease\':\r\n                        if(cart[cartIndex].quantity === 1) {\r\n                            cart = this.removeItemFromCart(id);\r\n                        } else {\r\n                            cart[cartIndex].quantity--;\r\n                        }\r\n                        break;\r\n                \r\n                    default:\r\n                        break;\r\n                }\r\n            } else {\r\n                // Ako ne postoji dodaj u niz novi objekat\r\n                cart.push({id, quantity: 1, productName, price})\r\n            }\r\n        }\r\n\r\n        localStorage.setItem(\'opa-cart\', JSON.stringify(cart));\r\n    }\r\n\r\n    updateMarkup() {\r\n        const cart = this.getCart();\r\n        let cartMarkup = \'\';\r\n\r\n        cart.forEach(product => {\r\n            // Sidebar markup\r\n            cartMarkup += `\r\n                <p>Ime: ${product.productName}</p>\r\n                <p>Cena: ${product.price}</p>\r\n                <div class="product__cart">\r\n                    <button class="remove-product">-</button>\r\n                    <span class="product__amount">${product.quantity}</span>\r\n                    <button class="add-product">+</button>\r\n                </div>\r\n            `;\r\n\r\n            // All products markup\r\n            document.querySelector(`[data-id="${product.id}"] .product__cart-data`).innerHTML = `\r\n                <div class="product__cart">\r\n                    <button class="remove-product">-</button>\r\n                    <span class="product__amount">${product.quantity}</span>\r\n                    <button class="add-product">+</button>\r\n                </div>\r\n            `\r\n        }) \r\n\r\n        document.querySelector(\'.cart-sidebar__list\').innerHTML = cartMarkup;\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/js/modules/cart/index.js?')},"./src/js/modules/hamburger.js":function srcJsModulesHamburgerJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Hamburger; });\nclass Hamburger {\r\n    constructor(app, el) {\r\n        this.app = app;\r\n        this.el = el;\r\n\r\n        this.handleClick = this.handleClick.bind(this);\r\n\r\n        el.addEventListener('click', this.handleClick);\r\n    }\r\n\r\n    handleClick() {\r\n        this.el.classList.toggle('is-open');\r\n        this.el.classList.toggle('is-closed');\r\n\r\n        document.querySelector('.navigator').classList.toggle('navigator--hidden')\r\n        document.querySelector('.header__container').classList.toggle('header__container--open')\r\n        document.querySelector('.mobile-menu').classList.toggle('mobile-menu--open');\r\n        document.body.classList.toggle('noscroll');\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/js/modules/hamburger.js?")},"./src/js/modules/header.js":function srcJsModulesHeaderJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Header; });\nclass Header {\r\n    constructor(app, el) {\r\n        this.app = app;\r\n        this.el = el;\r\n\r\n        window.addEventListener('scroll', function () {\r\n            if (window.scrollY >= 50) {\r\n                document.querySelector('.header__wrapper').classList.add('header__wrapper--scrolled')\r\n            } else {\r\n                document.querySelector('.header__wrapper').classList.remove('header__wrapper--scrolled')\r\n            }\r\n        });\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/js/modules/header.js?")},"./src/js/modules/navigator.js":function srcJsModulesNavigatorJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Navigator; });\nclass Navigator {\r\n    constructor(app, el) {\r\n        this.app = app;\r\n        this.el = el;\r\n\r\n        this.products = document.querySelectorAll('.products');\r\n        this.navItems = el.querySelectorAll('.navigator__list-item');\r\n        this.navList = el.querySelector('.navigator__list');\r\n\r\n        this.scrollToSection = this.scrollToSection.bind(this);\r\n\r\n        this.navItems.forEach(item => {\r\n            item.addEventListener('click', this.scrollToSection);\r\n        })\r\n\r\n        window.addEventListener('scroll', () => {\r\n            if (window.scrollY >= 50) {\r\n                document.querySelector('.navigator__list').classList.add('navigator__list--open')\r\n            } else {\r\n                document.querySelector('.navigator__list').classList.remove('navigator__list--open')\r\n            }\r\n\r\n            this.products.forEach(product => {\r\n                if (window.scrollY + 100 >= product.offsetTop && window.scrollY < product.offsetTop + product.offsetHeight) {\r\n                    const activeTitle = product.querySelector('.title__header').textContent;\r\n                    this.setActive(activeTitle);\r\n                }\r\n            })\r\n        });\r\n    }\r\n\r\n    scrollToSection(e) {\r\n        // Dohvati ime kategorije iz kliknutog dugmeta\r\n        const target = e.target.textContent;\r\n\r\n        this.products.forEach(product => {\r\n            // Dohvati ime dugmeta iz naslova svake sekcije\r\n            const activeTitle = product.querySelector('.title__header').textContent;\r\n\r\n            // Ako se kategorije slazu - skroluj do te sekcije\r\n            if (target === activeTitle) {\r\n                var headerOffset = 100;\r\n                var elementPosition = product.getBoundingClientRect().top;\r\n                var offsetPosition = elementPosition + window.pageYOffset - headerOffset;\r\n\r\n                window.scrollTo({\r\n                    top: offsetPosition,\r\n                    behavior: \"smooth\"\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    setActive(product) {\r\n        this.navItems.forEach(item => {\r\n            if (item.textContent === product) {\r\n                document.querySelector('.navigator__list-item--active').classList.remove('navigator__list-item--active')\r\n                item.classList.add('navigator__list-item--active')\r\n                this.navList.scrollLeft = item.offsetLeft - 20; // 20px da se slozi sa paddingom\r\n            }\r\n        });\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/js/modules/navigator.js?")},"./src/js/utils.js":function srcJsUtilsJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateGuid\", function() { return generateGuid; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isMediumViewport\", function() { return isMediumViewport; });\nconst generateGuid = () => {\r\n  const S4 = () => {\r\n    return ((( 1 + Math.random() ) * 0x10000) | 0).toString(16).substring(1);\r\n  };\r\n\r\n  return (S4()+S4()+'-'+S4()+'-'+S4()+'-'+S4()+'-'+S4()+S4()+S4());\r\n};\r\n\r\nconst isMediumViewport = () => {\r\n  return window.matchMedia('screen and (min-width: 989px)').matches;\r\n}\r\n\n\n//# sourceURL=webpack:///./src/js/utils.js?")}});